(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{23:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(18),o=n.n(r),i=(n(23),n(8)),u=n(9),s=n(3),l=n(5),d=n.n(l),j="/api/persons",b=function(){return d.a.get(j).then((function(e){return e.data}))},h=function(e){return d.a.post(j,e).then((function(e){return e.data}))},f=function(e){return d.a.put("".concat(j,"/").concat(e.id),e).then((function(e){return e.data}))},m=function(e){return d.a.delete("".concat(j,"/").concat(e.id),e)},O=n(0),p=function(e){var t=e.message,n=e.className;return""===t?null:Object(O.jsx)("p",{className:n,children:t})},g=function(e){var t=e.persons,n=e.filter,c=e.handleDelete;return t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(O.jsxs)("p",{children:[e.name," : ",e.number," ",Object(O.jsx)("button",{onClick:function(){return c(e)},children:"delete"},e.id)]})}))},v=function(e){var t=e.filter,n=e.handleChangeFilter;return Object(O.jsxs)("div",{children:["Filter : ",Object(O.jsx)("input",{value:t,onChange:n})]})},x=function(e){return Object(O.jsxs)("form",{children:[Object(O.jsxs)("div",{children:["Name: ",Object(O.jsx)("input",{value:e.newName,onChange:e.handleChangeName})]}),Object(O.jsxs)("div",{children:["Mobile Number: ",Object(O.jsx)("input",{value:e.newNumber,onChange:e.handleChangeNumber})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{type:"submit",onClick:e.addContact,children:"add"})})]})},C=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),o=Object(s.a)(r,2),l=o[0],d=o[1],j=Object(c.useState)(""),C=Object(s.a)(j,2),w=C[0],N=C[1],y=Object(c.useState)(""),S=Object(s.a)(y,2),k=S[0],A=S[1],D=Object(c.useState)(""),F=Object(s.a)(D,2),L=F[0],T=F[1],E=Object(c.useState)("completed"),J=Object(s.a)(E,2),M=J[0],R=J[1];Object(c.useEffect)((function(){b().then((function(e){return a(e)})).catch((function(e){return console.log("Failed to get Data")}))}),[]);var B=function(){setTimeout((function(){T(""),R("completed")}),5e3)};return Object(O.jsxs)("div",{children:[Object(O.jsx)("h2",{children:"Phonebook"}),Object(O.jsx)(p,{message:L,className:M}),Object(O.jsx)(v,{filter:k,handleChangeFilter:function(e){A(e.target.value)}}),Object(O.jsx)("b",{children:"Add a New Number"}),Object(O.jsx)(x,{newName:l,newNumber:w,handleChangeName:function(e){d(e.target.value)},handleChangeNumber:function(e){N(e.target.value)},addContact:function(e){e.preventDefault();var t=n.filter((function(e){return e.name.toLowerCase()===l.toLowerCase()}));t.length>=1?window.confirm("".concat(l," is already in phonebook. Do you want to replace?"))?f(Object(u.a)(Object(u.a)({},t[0]),{},{number:w})).then((function(e){var t=Object(i.a)(n);t=t.map((function(t){return t.id===e.id?e:t})),a(Object(i.a)(t)),d(""),N(""),T("Replaced ".concat(e.name," contact")),B()})).catch((function(e){R("error"),T("Cannot replace contact.Try Again!!"),B()})):(T("Cannot replace contact.Try Again!!"),B()):h({name:l,number:w}).then((function(e){a(n.concat(e)),d(""),N(""),T("Added ".concat(e.name," contact")),B()})).catch((function(e){R("error"),T(e.response.data.error),B()}))}}),Object(O.jsx)("h2",{children:"Numbers"}),Object(O.jsx)(g,{persons:n,filter:k,handleDelete:function(e){if(!window.confirm("Are you sure want to delete ".concat(e.name," contact?")))return null;m(e).then((function(){var t=n.filter((function(t){return t.id!==e.id}));a(t),d(""),N(""),T("Deleted ".concat(e.name," contact.")),B()})).catch((function(t){R("error"),T("Cannot delete ".concat(e.name," contact.Refresh and Try Again Else the app will misbehave!!")),B()}))}})]})};o.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(C,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.84e93cf2.chunk.js.map